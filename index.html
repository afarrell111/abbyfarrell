<!DOCTYPE html>
<html>
<head>
  <style>
    /* Previous styles remain the same */
    .window {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #ECE9D8;
      border: 1px solid #0055EA;
      width: 80%;
      max-width: 800px;
      max-height: 80vh;
      display: none;
      z-index: 200;
      box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
      resize: both;
      overflow: hidden;
    }

    .window.active {
      display: block;
    }

    .title-bar {
      background: linear-gradient(to right, #0A246A, #3A6EA5);
      color: white;
      padding: 6px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: move;
      user-select: none;
    }

    .close-button {
      width: 20px;
      height: 20px;
      background: linear-gradient(to bottom, #ff6b6b, #ff3333);
      border: 1px solid #cc0000;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 3px;
      font-family: 'Arial', sans-serif;
      font-size: 14px;
      user-select: none;
    }

    .close-button:hover {
      background: linear-gradient(to bottom, #ff8585, #ff4d4d);
    }

    .close-button:active {
      background: linear-gradient(to bottom, #ff3333, #ff6b6b);
    }

    .window-content {
      padding: 20px;
      overflow-y: auto;
      max-height: calc(80vh - 32px); /* Adjusted for title bar height */
      background: #fff;
    }

    /* Add styles for window being dragged */
    .window.dragging {
      opacity: 0.7;
      cursor: move;
    }
  </style>
</head>
<body>
  <!-- Previous content remains the same -->

  <script>
    let isDragging = false;
    let currentX;
    let currentY;
    let initialX;
    let initialY;
    let activeWindow = null;
    let xOffset = 0;
    let yOffset = 0;

    function showWindow(id) {
      const window = document.getElementById(id + '-window');
      window.style.transform = 'translate(-50%, -50%)';
      window.style.display = 'block';
      window.classList.add('active');
      
      // Reset position if window was previously moved
      xOffset = 0;
      yOffset = 0;
    }

    function hideWindow(id) {
      const window = document.getElementById(id + '-window');
      window.classList.remove('active');
      window.style.display = 'none';
    }

    function dragStart(e, window) {
      if (e.target.classList.contains('close-button')) return;
      
      initialX = e.type === "mousedown" ? e.clientX : e.touches[0].clientX;
      initialY = e.type === "mousedown" ? e.clientY : e.touches[0].clientY;

      if (e.target.closest('.title-bar')) {
        isDragging = true;
        activeWindow = window;
        window.classList.add('dragging');
      }
    }

    function dragEnd(e) {
      if (!isDragging) return;
      
      initialX = currentX;
      initialY = currentY;

      isDragging = false;
      activeWindow.classList.remove('dragging');
      activeWindow = null;
    }

    function drag(e) {
      if (!isDragging) return;

      e.preventDefault();

      currentX = e.type === "mousemove" ? e.clientX : e.touches[0].clientX;
      currentY = e.type === "mousemove" ? e.clientY : e.touches[0].clientY;

      xOffset = currentX - initialX;
      yOffset = currentY - initialY;

      setTranslate(currentX - initialX, currentY - initialY, activeWindow);
    }

    function setTranslate(xPos, yPos, el) {
      el.style.transform = `translate(${xPos}px, ${yPos}px)`;
    }

    // Initialize draggable windows
    document.querySelectorAll('.window').forEach(window => {
      // Add close button to title bar
      const titleBar = window.querySelector('.title-bar');
      const closeButton = document.createElement('div');
      closeButton.className = 'close-button';
      closeButton.innerHTML = 'Ã—';
      closeButton.onclick = () => hideWindow(window.id.replace('-window', ''));
      titleBar.appendChild(closeButton);

      // Add drag functionality
      window.addEventListener('mousedown', e => dragStart(e, window));
      window.addEventListener('touchstart', e => dragStart(e, window));
    });

    document.addEventListener('mousemove', drag);
    document.addEventListener('touchmove', drag);
    document.addEventListener('mouseup', dragEnd);
    document.addEventListener('touchend', dragEnd);

    // Prevent window from getting stuck when mouse leaves the window during drag
    document.addEventListener('mouseleave', dragEnd);

    // Initialize clock
    function updateClock() {
      const now = new Date();
      const time = now.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: true 
      });
      document.getElementById('clock').textContent = time;
    }

    setInterval(updateClock, 1000);
    updateClock();
  </script>
</body>
</html>
